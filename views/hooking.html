<!DOCTYPE html>
<html lang="en">

<head>
  <title>Daniel Pascual - DX9 Hooking Demo</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="../assets/css/main.css" />
  <style>
    .carousel-container {
      position: relative;
      max-width: 800px;
      margin: 0 auto;
      overflow: hidden;
      background: #f9f9f9;
      border-radius: 12px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
      padding: 20px;
    }

    .carousel {
      display: flex;
      transition: transform 0.5s ease;
    }

    .carousel-item {
      min-width: 100%;
      box-sizing: border-box;
      padding: 10px;
      display: none;
      flex-direction: column;
      align-items: center;
    }

    .carousel-item.active {
      display: flex;
    }

    .carousel-item video,
    .carousel-item img {
      max-width: 100%;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
      margin-bottom: 15px;
    }

    .carousel-item h4 {
      margin: 10px 0 5px;
      color: #333;
      font-weight: 600;
    }

    .carousel-item p {
      color: #555;
      font-size: 1em;
      line-height: 1.4em;
    }

    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: #14006e;
      border: none;
      color: white;
      font-size: 24px;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 50%;
      transition: background 0.3s;
    }

    .carousel-btn:hover {
      background: #fd7c03;
    }

    .carousel-btn.prev {
      left: 15px;
    }

    .carousel-btn.next {
      right: 15px;
    }
  </style>
</head>

<body class="is-preload">

  <!-- Header -->
  <div id="header">
    <div class="top">
      <div id="logo">
        <span class="image avatar48"><img src="../images/lipinpato.png" alt="my image" /></span>
        <h1 id="title">Daniel Pascual</h1>
        <p>Software Engineer / Technical Artist</p>
      </div>

      <nav id="nav">
        <ul>
          <li><a href="../index.html" id="portfolio-link"><span class="icon solid fa-th">Portfolio</span></a></li>
          <li><a href="#top" id="top-link"><span class="icon solid fa-code">Hooking DX9</span></a></li>
        </ul>
      </nav>
    </div>

    <div class="bottom">
      <ul class="icons">
        <li><a href="https://x.com/KillPotatos" class="icon brands fa-twitter"><span class="label">Twitter</span></a>
        </li>
        <li><a href="https://paxcu.itch.io" class="fa-brands fa-itch-io"><span class="label">Itch io</span></a></li>
        <li><a href="https://github.com/PascualDaniel" class="icon brands fa-github"><span
              class="label">Github</span></a></li>
        <li><a href="www.linkedin.com/in/daniel-pascual-lopez-600170254" class="icon brands fa-linkedin"><span
              class="label">LinkedIn</span></a></li>
        <li><a href="mailto:danielpascuallopez@hotmail.com" class="icon solid fa-envelope"><span
              class="label">Email</span></a></li>
      </ul>
    </div>
  </div>

  <!-- Main -->
  <div id="main">

    <section id="top" class="one dark cover">
      <div class="container">
        <header>
          <h2 class="alt"><strong>DirectX9 Hooking Demo</strong></h2>
          <p>Overlay experiment with Direct3D9 and DLL injection</p>
        </header>
      </div>
    </section>

    <section class="post">
      <header>
        <h2>DX9 Hooking Demo – Overlay Experiment</h2>
      </header>
      <div class="project-list">
        <p>
          This project is a <strong>low-level graphics experiment</strong> in C++ with <em>DirectX9</em>.
          The goal was to practice <strong>hooking and runtime rendering overlays</strong>.
          The base app renders a blue triangle, and by injecting a DLL, a smaller green triangle is drawn on top.
        </p>

        <p>
          For this demo I prepared a small C++ application with DirectX9 that initializes a graphics device
          (<code>IDirect3DDevice9</code>) and draws a blue triangle on screen.
          This program works as our “test game”.
        </p>
        <p>
          Then I created a DLL (<code>overlay_dll.dll</code>).
          When injected into the process, the DLL obtains the virtual table of the DirectX9 device and hooks the
          <code>EndScene</code> function.
          Hooking <code>EndScene</code> is key because DirectX executes it once per frame, so anything we put there is
          drawn on top of the original scene, creating the overlay.
        </p>
        <p>
          The test application loads the DLL using <code>LoadLibrary</code> and calls <code>InitOverlay</code>,
          passing the pointer to <code>IDirect3DDevice9</code>.
          In that function, I install the hook with MinHook and redirect <code>EndScene</code> to my own function.
        </p>
        <p>
          Inside <code>hkEndScene</code>, I first draw my own elements (for example, a green triangle or some text), and
          then call the original implementation so the game’s scene is preserved.
        </p>
        <p>
          This demonstrates the basic technique behind a game overlay: DLL injection, graphics API hooking,
          and rendering custom elements on top of the engine’s final output.
        </p>

        
      </div>
      <p>
          Full source code is available on <a class="highlight-link" href="https://github.com/PascualDaniel/Hooking"
            target="_blank">GitHub</a>.
        </p>
      <h3>Key Technical Features:</h3>
      <div class="project-list">
        <ul>
          <li>Direct3D9 initialization and render loop.</li>
          <li>Device hooking and DLL injection.</li>
          <li>Overlay rendering independent of the main app.</li>
          <li>Debug logging with <code>OutputDebugString</code>.</li>
        </ul>
      </div>

      <!-- Carousel -->
      <section id="dx9-demo-carousel">
        <h3>Project Media</h3>
        <div class="carousel-container">
          <div class="carousel">
            <div class="carousel-item active">
              <img src="../images/hooking/nocargada.png" alt="Blue Triangle" />
              <h4>Base App – Blue Triangle</h4>
              <p>Rendering a simple blue triangle using Direct3D9.</p>
            </div>
            <div class="carousel-item">
              <img src="../images/hooking/AmbosTriangulos.png" alt="Green Triangle DLL" />
              <h4>With DLL – Green Triangle</h4>
              <p>DLL injection overlays a smaller green triangle.</p>
            </div>
            <div class="carousel-item">
              <img src="../images/hooking/Snipet.png" alt="Code Snippet DX9" />
              <h4>Code Snippet</h4>
              <p>Part of the DirectX9 render loop and DLL initialization.</p>
            </div>
          </div>
          <button class="carousel-btn prev">⟨</button>
          <button class="carousel-btn next">⟩</button>
        </div>
      </section>

      <h3>What I Learned:</h3>
      <div class="project-list">
        <ul>
          <li>How to manage graphics devices in DirectX9.</li>
          <li>Basics of DLL injection and hooking.</li>
          <li>Separating logic between app and overlay library.</li>
          <li>Debugging and verifying runtime overlays.</li>
        </ul>
      </div>
    </section>

  </div>

  <!-- Footer -->
  <div id="footer">
    <ul class="copyright">
      <li>&copy; Daniel Pascual Portfolio. All rights reserved.</li>
      <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
    </ul>
  </div>

  <!-- Scripts -->
  <script src="../assets/js/jquery.scrolly.min.js"></script>
  <script src="../assets/js/jquery.scrollex.min.js"></script>
  <script src="../assets/js/browser.min.js"></script>
  <script src="../assets/js/breakpoints.min.js"></script>
  <script src="../assets/js/util.js"></script>
  <script src="../assets/js/main.js"></script>
  <script>
    // Simple carousel logic
    const items = document.querySelectorAll('.carousel-item');
    const nextBtn = document.querySelector('.carousel-btn.next');
    const prevBtn = document.querySelector('.carousel-btn.prev');
    let current = 0;

    function showItem(index) {
      items.forEach((item, i) => {
        item.classList.remove('active');
        if (i === index) item.classList.add('active');
      });
    }

    nextBtn.addEventListener('click', () => {
      current = (current + 1) % items.length;
      showItem(current);
    });

    prevBtn.addEventListener('click', () => {
      current = (current - 1 + items.length) % items.length;
      showItem(current);
    });

    showItem(current);
  </script>
</body>

</html>